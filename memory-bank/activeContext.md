# Active Context

## Current Work Focus

* PDF 페이지 간 크기 불일치 문제 **해결됨** (100% 고정 줌에서 모든 페이지 크기가 일관적으로 유지됨)
* PDF 기본 줌 설정 100% 적용 및 스케일링 로직 안정화
* PDF 뷰어의 컨테이너 크기, 스케일 계산, CSS 레이아웃의 상호작용 최적화

## Recent Changes

* **PDF 기본 줌 설정 변경**: 자동 조정에서 100% 고정으로 변경
  - `currentZoom = '1.0'`, `currentScale = 1.0`으로 초기화
  - HTML에서 100% 옵션이 기본 선택되도록 수정
  - 브라우저 리사이즈 시 고정 스케일 모드에서는 재조정하지 않도록 개선

* **PDF 페이지 간 크기 불일치 문제 해결**
  - 컨테이너 크기 변화(800px → 961px) 및 스케일 계산 과정 디버깅 후, 고정 스케일 모드에서 컨테이너 크기와 완전 독립적으로 작동하도록 로직 개선
  - currentScale 값 동기화 및 parseFloat() 안전성 강화
  - 실제 테스트 결과, 모든 페이지에서 크기가 일정하게 유지됨을 확인

* **우선순위 조정**
  - PDF 텍스트 선택 위치 불일치 문제는 우선순위 하향(페이지 크기 일관성 확보가 더 기본적인 사용성 문제였음)

## Next Steps

* PDF 텍스트 선택 위치 불일치 문제 등 남은 PDF 뷰어 세부 이슈 개선
* 사용자 피드백 기반 추가 개선 및 리팩토링
* memory bank, bugs.md 등 문서 동기화 유지

## Active Decisions and Considerations

* **100% 기본 줌 우선**: 사용자가 요청한 100% 기본값으로 변경하여 예측 가능한 크기 제공
* **페이지 간 일관성 확보**: 모든 페이지에서 크기가 동일하게 유지되는 것이 최우선
* **컨테이너 크기 독립성**: 고정 스케일 모드에서는 컨테이너 크기 변화에 영향받지 않도록 유지
* PDF 텍스트 선택 문제는 여전히 중요하지만, 현재는 페이지 크기 일관성 확보가 완료되어 우선순위가 낮아짐

## Important Patterns and Preferences

* 사용자 피드백에 기반한 즉각적인 우선순위 조정
* 문제 발생 시 체계적인 디버깅 및 문서화 (bugs.md 활용)
* 다양한 해결 방식을 시도하되 근본 원인 파악에 집중
* 새로운 버그 발견 시 즉시 문서화하고 해결 방안 제시

## Learnings and Project Insights

* **컨테이너 크기 동적 변화의 복잡성**: 첫 페이지 렌더링 후 컨테이너 크기가 변경되어 이후 페이지에 영향 → 고정 스케일 모드에서 완전히 독립화하여 해결
* **스케일링 로직의 상호의존성**: 고정 스케일이어도 컨테이너 상태에 의존하는 부분이 있었으나, 로직 개선으로 해소
* **PDF.js와 CSS 레이아웃의 상호작용**: PDF 렌더링이 컨테이너 크기에 영향을 주고, 이것이 다시 스케일 계산에 영향 → 컨테이너 크기 고정 및 스케일 독립화로 해결
* 사용자 테스트 피드백이 개발 우선순위 결정에 중요한 역할
